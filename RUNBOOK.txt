================================================================================
MM BOT - QUICK HEALTH CHECK (30 sekund)
================================================================================

1. SPRAWD≈π SPREADY (config vs runtime):

   mm-spreads

   LUB rƒôcznie:
   grep SPREAD_OVERRIDE_ .env
   tail -500 /root/.pm2/logs/mm-bot-out.log | grep üéØ | tail -10
   BOT_LOG_PATH=/root/.pm2/logs/mm-bot-out.log npx tsx scripts/check_spread_mismatch.ts

   ‚úÖ OK gdy: STATUS=MATCH dla aktywnych par
   ‚ö†Ô∏è  PROBLEM gdy: MISMATCH (ENV ‚â† LOG)

2. SPRAWD≈π BOT:

   pm2 status mm-bot
   pm2 logs mm-bot --lines 30 --nostream

   ‚úÖ OK gdy: status=online, uptime ro≈õnie, brak error√≥w
   ‚ö†Ô∏è  PROBLEM gdy: status=errored/stopped, du≈ºo restart√≥w

3. SPRAWD≈π AUTO-UPDATE:

   systemctl list-timers spread-snippet.timer --no-pager

   ‚úÖ OK gdy: NEXT za <2h, LAST niedawno (success)
   ‚ö†Ô∏è  PROBLEM gdy: timer disabled lub LAST z b≈Çƒôdem

================================================================================
TYPOWE PROBLEMY & QUICK FIXES
================================================================================

‚ùå "Spready nie pasujƒÖ" (MISMATCH):
   pm2 restart mm-bot --update-env
   # Poczekaj 30s i sprawd≈∫ ponownie: mm-spreads

‚ùå "Bot offline":
   pm2 logs mm-bot --err --lines 50
   # Szukaj ostatniego b≈Çƒôdu, potem:
   pm2 restart mm-bot

‚ùå "Auto-update nie dzia≈Ça":
   journalctl -u spread-snippet.service -n 50 --no-pager
   # Je≈õli "No fresh Nansen data" ‚Üí OK (graceful skip)
   # Je≈õli error ‚Üí rƒôczny test:
   cd /root/hyperliquid-mm-bot-complete && ./scripts/gen_spread_snippet.sh

‚ùå "Daily loss limit block":
   grep MAX_DAILY_LOSS_USD .env  # Powinno byƒá 700
   npx tsx scripts/check_positions.ts  # Sprawd≈∫ realne pozycje
   # Je≈õli PnL faktycznie < -700 ‚Üí CZEKAJ (safety works!)
   # Je≈õli PnL dodatnie a limit trafiony ‚Üí bug, manual reset (emergency only)

================================================================================
KLUCZOWE WARTO≈öCI (2025-11-09)
================================================================================

MAX_DAILY_LOSS_USD = 700      (.env)
Global spread      = 35 bps   (.env - MAKER_SPREAD_BPS)
Effective min      = 21 bps   (0.6 √ó 35, safety floor)
Auto-update freq   = 2h       (even hours: 00:00, 02:00, 04:00...)
Nansen max age     = 4h       (graceful skip if older)

Oczekiwane spready (przyk≈Çad):
- TAO, ZEC, VIRTUAL = 21 bps (confluence: Nansen ‚â• 2.0)
- ASTER = 32 bps

================================================================================
EMERGENCY CONTACTS & FILES
================================================================================

Pe≈Çny troubleshooting: /root/hyperliquid-mm-bot-complete/TROUBLESHOOTING.md
Config:                /root/hyperliquid-mm-bot-complete/.env
Spread calc params:    /root/hyperliquid-mm-bot-complete/spread_config.json
Bot state:             /root/hyperliquid-mm-bot-complete/data/bot_state.json
PM2 logs:              /root/.pm2/logs/mm-bot-{out,err}.log
Timer logs:            journalctl -u spread-snippet.service

================================================================================
CO NIE ROBIƒÜ W PANICE
================================================================================

‚ùå NIE kasuj .env na pa≈Çƒô
‚ùå NIE edytuj TypeScript na produkcji "na szybko"
‚ùå NIE resetuj dailyPnL je≈õli strata jest realna (safety working!)

‚úÖ TAK: mm-spreads ‚Üí mm-status ‚Üí systemctl list-timers
‚úÖ TAK: Sprawd≈∫ logi przed dzia≈Çaniem
‚úÖ TAK: Backup przed ka≈ºdƒÖ rƒôcznƒÖ zmianƒÖ

================================================================================
