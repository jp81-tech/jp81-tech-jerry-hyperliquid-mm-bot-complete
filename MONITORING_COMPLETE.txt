â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… MONITORING SYSTEM SETUP COMPLETE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Date: 2025-11-11 11:54 UTC

## ğŸ“¦ Installed Components

### 1. Manual Crash Collection
   âœ… collect_crash.sh (5.0K)
      - Collects crash data on demand
      - Saves crash snapshots
      - Updates crash_timeline.txt automatically

### 2. Automated Health Checks
   âœ… scripts/check_bot_alive.sh (1.4K)
      - Checks process status
      - Verifies recent activity (quant_evt=submit)
      - 5-minute activity window

### 3. Slack Alerting
   âœ… scripts/slack_alert.sh (2.4K)
      - Sends rich Slack messages
      - 10-minute cooldown (no spam)
      - Includes diagnostic info + action buttons

### 4. Cron Setup Tool
   âœ… /tmp/setup_monitoring_cron.sh (2.2K)
      - Installs monitoring cron job
      - Runs every 5 minutes
      - Logs to /var/log/mm_bot_monitor.log

### 5. Documentation
   âœ… MONITORING_SETUP.md (7.7K)
      - Complete system documentation
      - Setup instructions
      - Troubleshooting guide
   
   âœ… MONITORING_QUICKSTART.txt (3.4K)
      - Quick start for both modes
      - Common commands reference

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

## ğŸš€ Quick Start Options

### Option A: Manual Only (No Slack)
```bash
cd /root/hyperliquid-mm-bot-complete
./collect_crash.sh "bot issue description"
```

### Option B: Automated with Slack Alerts
```bash
# 1. Set webhook
export SLACK_WEBHOOK_URL="https://hooks.slack.com/services/..."
echo 'export SLACK_WEBHOOK_URL="..."' >> ~/.bashrc

# 2. Setup monitoring
/tmp/setup_monitoring_cron.sh

# 3. Test
cd /root/hyperliquid-mm-bot-complete
./scripts/slack_alert.sh

# 4. Monitor
tail -f /var/log/mm_bot_monitor.log
```

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

## ğŸ“Š System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     MM Bot Process                          â”‚
â”‚                  (mm_hl.ts running)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â”‚ Writes logs
                     â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  bot.log    â”‚
              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                         â”‚
        â–¼                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Manual Check  â”‚         â”‚  Automated Cron  â”‚
â”‚ (on demand)   â”‚         â”‚  (every 5 min)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                          â”‚
        â”‚                          â–¼
        â”‚                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                 â”‚ check_bot_alive.sh  â”‚
        â”‚                 â”‚  - Process alive?   â”‚
        â”‚                 â”‚  - Recent submits?  â”‚
        â”‚                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                            â”‚
        â”‚                            â”‚ If dead/hung
        â”‚                            â–¼
        â”‚                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                  â”‚ slack_alert.sh   â”‚
        â”‚                  â”‚ - Send webhook   â”‚
        â”‚                  â”‚ - Log alert      â”‚
        â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                            â”‚
        â”‚                            â–¼
        â”‚                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                  â”‚  Slack Channel   â”‚
        â”‚                  â”‚  "âš ï¸ Bot Down"   â”‚
        â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ collect_crash.sh   â”‚
â”‚ - Save crash log   â”‚
â”‚ - Analyze metrics  â”‚
â”‚ - Update timeline  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  crash_timeline.txt          â”‚
â”‚  crash_20251111_*.log        â”‚
â”‚  (Permanent crash records)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

## ğŸ“ File Locations

/root/hyperliquid-mm-bot-complete/
â”œâ”€â”€ collect_crash.sh               â† Manual crash collection
â”œâ”€â”€ crash_timeline.txt             â† Crash history
â”œâ”€â”€ crash_*.log                    â† Individual crash logs
â”œâ”€â”€ MONITORING_SETUP.md            â† Full documentation
â”œâ”€â”€ MONITORING_QUICKSTART.txt      â† Quick start guide
â”œâ”€â”€ MONITORING_COMPLETE.txt        â† This file
â””â”€â”€ scripts/
    â”œâ”€â”€ check_bot_alive.sh         â† Health check
    â””â”€â”€ slack_alert.sh             â† Alert sender

/tmp/
â””â”€â”€ setup_monitoring_cron.sh       â† Cron installer

/var/log/
â””â”€â”€ mm_bot_monitor.log             â† Monitoring logs

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

## ğŸ“ Next Steps

1. Choose your monitoring mode:
   â–¡ Manual only â†’ Just use ./collect_crash.sh when needed
   â–¡ Automated â†’ Follow Option B setup above

2. Test the system:
   â–¡ Run: ./collect_crash.sh "test run"
   â–¡ Check output: tail -80 crash_timeline.txt
   
3. For automated mode:
   â–¡ Get Slack webhook from: https://api.slack.com/messaging/webhooks
   â–¡ Run: /tmp/setup_monitoring_cron.sh
   â–¡ Test: ./scripts/slack_alert.sh
   â–¡ Monitor: tail -f /var/log/mm_bot_monitor.log

4. Read full documentation:
   cat MONITORING_SETUP.md

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

## âœ… Integration with Existing System

This monitoring system complements:

âœ… Global error handlers (src/mm_hl.ts)
   - process.on('unhandledRejection')
   - process.on('uncaughtException')

âœ… Crash documentation system
   - crash_timeline.txt (updated by collect_crash.sh)
   - CRASH_TEMPLATE.txt (template for manual entries)
   - README_DEBUG.md (debugging playbook)

âœ… Debugging tools
   - scripts/check_positions.ts
   - scripts/check-all-orders.ts
   - Manual analysis guides

Complete workflow:
1. Bot crashes â†’ Global error handlers log it
2. Monitoring detects â†’ Slack alert sent
3. SSH to server â†’ Run collect_crash.sh
4. Analyze â†’ Review crash_timeline.txt + crash_*.log
5. Fix code â†’ Apply changes
6. Restart â†’ Monitor continues

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

## ğŸ¯ Monitoring Best Practices

Daily:
  â–¡ Check monitoring logs: tail -50 /var/log/mm_bot_monitor.log
  â–¡ Review bot health: ./scripts/check_bot_alive.sh

Weekly:
  â–¡ Review crash timeline: tail -200 crash_timeline.txt
  â–¡ Look for patterns (same coins, times, error types)
  â–¡ Clean old crash logs: ls -t crash_*.log | tail -n +11 | xargs rm -f

Monthly:
  â–¡ Test Slack alerts (temporarily stop bot)
  â–¡ Verify cron is running: crontab -l | grep slack_alert
  â–¡ Review monitoring effectiveness

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ‰ Monitoring system ready to use\!

For help, see: MONITORING_SETUP.md

